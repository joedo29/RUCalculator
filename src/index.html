<!DOCTYPE html>
<html>
<head>
<title>RU Calculator</title>
</head>
<body>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Bellevue_College_logo.svg/1280px-Bellevue_College_logo.svg.png"width="800" ><br>
<h1>Thinking about switching to Azure?</h1>
<h1>Use our Calculator to estimate the cost</h1>

<!-- <form onsubmit="jsonCheck()" -->
<p2>Please upload .JSON file</p2>
<form onsubmit="checkJSON()">
  <input type="file" id = "fUpload" accept="application/json">

  <br>
  Number of Documents:
  <input type="text" name="doc" value="#"><br>
  Create:
  <input type="text" name="create" value="#"><br>
  Read:<br>
  <input type="text" name="read" value="#"><br>
  Update:<br>
  <input type="text" name="update" value="#"><br>
  Delete:<br>
  <input type="text" name="delete" value="#"><br>
  <br>
  <input type="submit" value="Submit">
</form>

<script>

    //Kevin's method
    function checkJSON() {
        var fileInput =  document.getElementById("fUpload");
        var json = new FileReader();
        json.onload = function(event) {
            var contents = event.target.result;

            //If valid JSON format
            if(JSON.parse(event.target.result)){
                //Go to Joe's method
                findSize();
            }else{
                //output error
                alert("JSON file is not written in valid JSON format. ");
            }
        }
        json.onerror = function(errors) {
            //display error(s)
            alert("Error: " + errors)
        }
        json.readAsText(fileInput.files[0]);
    }


    //Joe's method
    function findSize() {
        var fileInput =  document.getElementById("fUpload");
        try{
            alert("Your rough estimation is: " + (fileInput.files[0].size / 1024 )+ " RU"); // Size returned in bytes.
        }catch(e){
            var objFSO = new ActiveXObject("Scripting.FileSystemObject");
            var e = objFSO.getFile( fileInput.value);
            var fileSize = e.size;
            alert(fileSize);
        }
    }

    
</script>

</body>
</html>
