<!DOCTYPE html>
<html>
<head>
  <style>
  .calculate{
    width:100px;
    height:50px;
    color: white;
    background-color:#20639b;
    margin-top:20px;
    margin-bottom:20px;
  }
  </style>

<title>RU Calculator</title>

</head>
<body>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Bellevue_College_logo.svg/1280px-Bellevue_College_logo.svg.png"width="800" ><br>
<h1>Thinking about switching to Azure?</h1>
<h1>Use our Calculator to estimate the cost</h1>

<div id="mainDiv"></div>

<button id="addButton" type="button">Add Form</button>

    <br> <input class = "calculate" type="submit" value="Calculate">

<script>

var addFormButton = document.getElementById("addButton");
var maindDiv = document.querySelector("#mainDiv");

addFormButton.addEventListener("click", addAForm, false );


var idCounter = 0;

var parentElement = "";
var childElement = "";



function addAForm(){
    parentElement = document.createElement("div");
    parentElement.setAttribute("id", idCounter++);
    var formHTMLLayout = " <form onsubmit=\"checkJSON()\"> <p2>Please upload .JSON file</p2> <input type=\"file\" id = \"fUpload\" accept=\"application/json\">"+
        "<br> Number of Documents:<input type=\"text\" name=\"firstname\" "+
        "placeholder=\"# of documents\"> <br> <br> Create: <input type=\"text\" "+
        "name=\"#\" placeholder=\"#\"> <br><br> Read: <input type=\"text\" "+
        "name=\"#\" placeholder=\"#\"> <br><br> Update: <input type=\"text\" "+
        "name=\"#\" placeholder=\"#\"> <br><br> Delete: <input type=\"text\" "+
        "name=\"#\" placeholder=\"#\"> <br><br>" +
        "<button id=\"deleteButton" + idCounter + "\" type=\"button\" "+
        "onClick=\"removeForm(this.id)\">Delete Section" +
        "</button><br> <br><hr></form>";

    parentElement.innerHTML = formHTMLLayout;
    maindDiv.appendChild(parentElement);

}

function removeForm(elementId){
   childElement = document.getElementById(elementId);
   childElement.parentNode.parentNode.remove();
}

    function documentId(){
      var documentId = 0;
      documentId++;
    }
    //Kevin's method
    function checkJSON() {
        var fileInput =  document.getElementById("fUpload");
        var json = new FileReader();
        json.onload = function(event) {
            var contents = event.target.result;

            //If valid JSON format
            if(JSON.parse(event.target.result)){
                //Go to Joe's method
                findSize();
            }else{
                //output error
                alert("JSON file is not written in valid JSON format. ");
            }
        }
        json.onerror = function(errors) {
            //display error(s)
            alert("Error: " + errors)
        }
        json.readAsText(fileInput.files[0]);
    }


    //Joe's method
    function findSize() {
        var fileInput =  document.getElementById("fUpload");
        try{
            alert("Your rough estimation is: " + (fileInput.files[0].size / 1024 )+ " RU"); // Size returned in bytes.
        }catch(e){
            var objFSO = new ActiveXObject("Scripting.FileSystemObject");
            var e = objFSO.getFile( fileInput.value);
            var fileSize = e.size;
            alert(fileSize);
        }
    }


</script>

</body>
</html>
